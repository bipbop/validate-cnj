!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).JuristekParser={})}(this,function(t){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var e;function n(){e.apply(this,arguments)}function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));return Object.defineProperty(e,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(e,"name",{configurable:!0,enumerable:!1,value:e.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(e,e.constructor),r(e)):(Object.defineProperty(e,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0}),e)}var l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}((function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,(e=Error,n.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e,n)),o)),i={compute:function(t){var e=function(t){if(null==t)throw new Error("Expecting 'rawValue' of type 'string', found: '"+t+"'");if("string"==typeof t)return t;throw new Error("Expecting 'rawValue' of type 'string', found: '"+typeof t+"'")}(t);if(!e.match(f))throw new Error("Invalid data format; expecting: '"+f+"', found: '"+e+"'");return a(e)},computeWithoutCheck:function(t){return a(t)}},u="A".charCodeAt(0),c="0".charCodeAt(0),f=/^[0-9A-Z]{1,}$/;function a(t){for(var e,r=0,n=0;n<t.length;++n)1e6<(r=(e=t.charCodeAt(n))+(u<=e?100*r-u+10:10*r-c))&&(r%=97);return r%97}var h=i;function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(e){return e=function(e,r){return e=e||{},Object.keys(r).forEach(function(t){void 0===e[t]&&(e[t]=d(r[t]))}),e}(e||{},v),function(t){return function(t,e){if("string"!=typeof t)return m(t,e);for(var r=0,n=0;n<t.length;n++){var o=m(t.charCodeAt(n),e);if(o<0)return-1;r+=o}return r}(t,e)}}var s,y,d=(function(t){var e=(h.clonePrototype=function(t){if(null===t)return null;function e(){}return e.prototype=t,new e},h.__objToStr=r,h.__isDate=function(t){return"object"===b(t)&&"[object Date]"===r(t)},h.__isArray=function(t){return"object"===b(t)&&"[object Array]"===r(t)},h.__isRegExp=function(t){return"object"===b(t)&&"[object RegExp]"===r(t)},h.__getRegExpFlags=y,h);function h(t,f,e,a){"object"===b(f)&&(e=f.depth,a=f.prototype,f.filter,f=f.circular);var p=[],s=[],l="undefined"!=typeof Buffer;return void 0===f&&(f=!0),void 0===e&&(e=1/0),function t(e,r){if(null===e)return null;if(0==r)return e;var n,o;if("object"!=b(e))return e;if(h.__isArray(e))n=[];else if(h.__isRegExp(e))n=new RegExp(e.source,y(e)),e.lastIndex&&(n.lastIndex=e.lastIndex);else if(h.__isDate(e))n=new Date(e.getTime());else{if(l&&Buffer.isBuffer(e))return n=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length),e.copy(n),n;void 0===a?(o=Object.getPrototypeOf(e),n=Object.create(o)):(n=Object.create(a),o=a)}if(f){var i=p.indexOf(e);if(-1!=i)return s[i];p.push(e),s.push(n)}for(var u in e){var c;o&&(c=Object.getOwnPropertyDescriptor(o,u)),c&&null==c.set||(n[u]=t(e[u],r-1))}return n}(t,e)}function r(t){return Object.prototype.toString.call(t)}function y(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}t.exports&&(t.exports=e)}(s={exports:{}},s.exports),s.exports),g=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],v={nul:0,control:0};function m(t,e){return 0===t?e.nul:t<32||127<=t&&t<160?e.control:function(t){var e,r=0,n=g.length-1;if(t<g[0][0]||t>g[n][1])return!1;for(;r<=n;)if(e=Math.floor((r+n)/2),t>g[e][1])r=e+1;else{if(!(t<g[e][0]))return!0;n=e-1}return!1}(t)?0:1+(4352<=t&&(t<=4447||9001==t||9002==t||11904<=t&&t<=42191&&12351!=t||44032<=t&&t<=55203||63744<=t&&t<=64255||65040<=t&&t<=65049||65072<=t&&t<=65135||65280<=t&&t<=65376||65504<=t&&t<=65510||131072<=t&&t<=196605||196608<=t&&t<=262141))}function w(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=t.map(function(t,e){var r=t;if("number"==typeof r&&(r=r.toString()),null===r&&1===e)return r;if("string"!=typeof r)throw new l("Could not validate the CNJ number, wrong parameter type");if(!_[e])throw new l("Could not validate the CNJ number, wrong parameters size");return j(_[e],r,"0")}),n=r[0],o=r[1],i=r[2],u=r[3],c=r[4],f=r[5],a=h.compute(n).toString(),p=h.compute(a+i+u+c).toString(),s=98-h.compute(p+f+"00").toString()%97;if(this.dv=j(2,s.toString(),"0"),null!==o&&o!==this.dv)throw new l("Could not validate the CNJ number, invalid checker digit");this.proc=n,this.year=i,this.justice=u,this.number=c,this.court=f}var j=y=function(t,e,r){var n,o,i,u;if(null==r&&(r={}),o="number"==typeof t){var c=[t,e];e=c[0],t=c[1]}return"string"==typeof r&&(r={char:r}),null==r.char&&(r.char=" "),null==r.strip&&(r.strip=!1),"string"!=typeof t&&(t=t.toString()),u=null,y="",r.colors&&(n=/\x1B\[(?:[0-9]{1,2}(?:;[0-9]{1,2})?)?[m|K]/g,u=t.replace(n,"")),(i=r.fixed_width?e-(u||t).length:e-p(r.wcwidth_options)(u||t))<0?r.strip?o?t.substr(-1*e):t.substr(0,e):t:(y+=r.char.repeat(i),o?y+t:t+y)},_=[7,2,4,1,2,4],O=/[^0-9]/g,x={pieces:{configurable:!0}};w.factory=function(t,e,r){var n=e.justice,o=e.number,i=e.court;return new w(t,null,r,n,o,i)},x.pieces.get=function(){return{proc:this.proc,year:this.year,justice:this.justice,number:this.number,court:this.court}},w.load=function(t){var r=t.replace(O,""),n=0;return new(Function.prototype.bind.apply(w,[null].concat(_.map(function(t){var e=r.substr(n,t);return n+=t,e}))))},w.prototype.generate=function(t){return void 0===t&&(t=!0),t?[this.proc,[this.dv,this.year,this.justice,this.number,this.court].join(".")].join("-"):this.proc+this.dv+this.year+this.justice+this.number+this.court},Object.defineProperties(w.prototype,x),t.Exception=l,t.Validate=w,Object.defineProperty(t,"__esModule",{value:!0})});
